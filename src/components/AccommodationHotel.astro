---
import Container from "./Container.astro"

const alumniHotel = {
  name: "The Inn at ONU",
  tagline: "Official Conclave Room Block",
  address: "401 West College Avenue, Ada, OH 45810",
  amenities: ["On-Campus Location", "On-Site Dining & Pub", "Meeting Spaces", "Signature Amenities"],
  bookingUrl: "https://www.innatonu.com/",
  description: "The only on-campus hotel at Ohio Northern University. Enjoy warm Midwestern hospitality, deluxe rooms, and convenient access to all Conclave events."
}

const alumniImages = [
  "/images/hotel/inn-king-room.webp",
  "/images/hotel/inn-suite-living.webp",
  "/images/hotel/inn-queen-room.webp",
  "/images/hotel/inn-suite-kitchen.webp",
]

const undergradHousing = {
  name: "On-Campus Residence Halls",
  tagline: "Undergraduate Housing",
  description: "Stay in ONU's residence halls during Conclave weekend. Experience campus life firsthand with comfortable accommodations and easy access to all events.",
  amenities: ["Campus Location", "Dining Hall Access", "Community Spaces", "Included in Your Conclave Registration"],
  bookingUrl: "https://www.onu.edu/student-life/housing"
}

const undergradImages = [
  "/images/campus/onu-residence-1.webp",
  "/images/campus/onu-residence-2.webp",
]
---

<section id="hotel-accommodations" class="accommodation-hotel-section paused pt-0 pb-16 sm:pb-20 md:pb-24 bg-[#f4f7ff]">
  <Container>
    <div class="mb-6">
      <h2 class="accommodation-title">
        Where to Stay
      </h2>
    </div>
    <p class="text-gray-600 text-lg text-center mb-12 sm:mb-16">
      We've secured accommodations on the ONU campus for Conclave attendees.
    </p>

    <div class="grid lg:grid-cols-2 gap-8">
      <!-- Alumni Accommodations - Inn at ONU -->
      <div class="featured-hotel-card group relative bg-[#f4f7ff] rounded-3xl overflow-hidden shadow-xl ring-2 ring-[#ea7600]">
        <div class="absolute top-4 left-4 z-10 px-4 py-2 bg-gradient-to-r from-[#ea7600] to-[#f1d44b] text-[#212322] text-sm font-bold uppercase rounded-full flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
          </svg>
          Alumni
        </div>
        <div class="aspect-[4/3] bg-gradient-to-br from-[#212322] to-[#3a3b39] relative overflow-hidden">
          <div class="image-carousel absolute inset-0">
            {alumniImages.map((src, index) => (
              <img
                loading="lazy"
                src={src}
                alt={`Inn at ONU room ${index + 1}`}
                class="carousel-image carousel-alumni absolute inset-0 w-full h-full object-cover"
                style={`animation-delay: ${index * 4}s;`}
                loading="lazy"
              />
            ))}
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
          <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
            <p class="text-[#ea7600] font-semibold text-lg">On Campus</p>
            <p class="text-white/80 text-sm mt-1">Walk to all events</p>
          </div>
        </div>
        <div class="p-6 md:p-8">
          <p class="text-[#ea7600] font-semibold text-sm uppercase tracking-wider mb-2">{alumniHotel.tagline}</p>
          <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-3">
            {alumniHotel.name}
          </h3>
          <p class="text-gray-600 text-sm mb-4">
            {alumniHotel.description}
          </p>
          <p class="text-sm text-[#ea7600] font-medium mb-4 flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
            </svg>
            Reserved for Phi Mu Delta alumni only
          </p>

          <div class="flex flex-wrap gap-2 mb-4">
            {alumniHotel.amenities.map((amenity) => (
              <span class="px-3 py-1 bg-[#ea7600]/10 text-[#ea7600] text-xs font-medium rounded-full">
                {amenity}
              </span>
            ))}
          </div>

          <div class="space-y-2 text-sm text-gray-600 mb-6">
            <p class="flex items-center gap-2">
              <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              {alumniHotel.address}
            </p>
          </div>

          <button id="alumni-book-btn" type="button" class="inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-[#ea7600] to-[#f1d44b] text-[#212322] font-bold rounded-full hover:shadow-xl hover:shadow-[#ea7600]/30 hover:-translate-y-1 transition-all duration-300 cursor-pointer">
            Book Your Room
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </button>
        </div>
      </div>

      <!-- Undergraduate Housing -->
      <div class="featured-hotel-card group relative bg-[#f4f7ff] rounded-3xl overflow-hidden shadow-xl ring-2 ring-[#f1d44b]">
        <div class="absolute top-4 left-4 z-10 px-4 py-2 bg-gradient-to-r from-[#f1d44b] to-[#fde68a] text-[#212322] text-sm font-bold uppercase rounded-full flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"></path>
          </svg>
          Undergraduates
        </div>
        <div class="aspect-[4/3] bg-gradient-to-br from-[#212322] to-[#3a3b39] relative overflow-hidden">
          <div class="image-carousel absolute inset-0">
            {undergradImages.map((src, index) => (
              <img
                loading="lazy"
                src={src}
                alt={`ONU residence hall ${index + 1}`}
                class="carousel-image carousel-undergrad absolute inset-0 w-full h-full object-cover"
                style={`animation-delay: ${index * 4}s;`}
                loading={index === 0 ? "eager" : "lazy"}
              />
            ))}
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
          <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
            <p class="text-[#f1d44b] font-semibold text-lg">On Campus</p>
            <p class="text-white/80 text-sm mt-1">Live the ONU experience</p>
          </div>
        </div>
        <div class="p-6 md:p-8">
          <p class="text-[#d4a600] font-semibold text-sm uppercase tracking-wider mb-2">{undergradHousing.tagline}</p>
          <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-3">
            {undergradHousing.name}
          </h3>
          <p class="text-gray-600 text-sm mb-4">
            {undergradHousing.description}
          </p>
          <p class="text-sm text-[#d4a600] font-medium mb-4 flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
            </svg>
            Available for undergraduate members
          </p>

          <div class="flex flex-wrap gap-2 mb-4">
            {undergradHousing.amenities.map((amenity) => (
              <span class="px-3 py-1 bg-[#f1d44b]/20 text-[#9a7b00] text-xs font-medium rounded-full">
                {amenity}
              </span>
            ))}
          </div>

          <div class="space-y-2 text-sm text-gray-600 mb-6">
            <p class="flex items-center gap-2">
              <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Ohio Northern University, Ada, OH 45810
            </p>
          </div>

          <a href={undergradHousing.bookingUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-[#f1d44b] to-[#fde68a] text-[#212322] font-bold rounded-full hover:shadow-xl hover:shadow-[#f1d44b]/30 hover:-translate-y-1 transition-all duration-300">
            Contact the National Office
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>

  </Container>
</section>

<script>
  const hotelSection = document.querySelector('.accommodation-hotel-section');
  if (hotelSection) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            hotelSection.classList.remove('paused');
          } else {
            hotelSection.classList.add('paused');
          }
        });
      },
      { rootMargin: '100px', threshold: 0 }
    );
    observer.observe(hotelSection);
  }
</script>

<style>
  .accommodation-title {
    font-family: 'Have Heart', cursive;
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    background: linear-gradient(135deg, #ea7600, #f1d44b);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
  }

  .accommodation-hotel-section.paused .featured-hotel-card {
    animation-play-state: paused;
  }

  .accommodation-hotel-section.paused .carousel-image {
    animation-play-state: paused;
  }

  .featured-hotel-card {
    animation: fadeSlideUp 0.6s ease-out both;
  }

  .featured-hotel-card:nth-child(2) {
    animation-delay: 0.2s;
  }

  @keyframes fadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Image carousel - 4 images */
  .carousel-image {
    opacity: 0;
    animation: carouselFade 16s infinite;
  }

  /* Undergraduate carousel - 2 images */
  .carousel-undergrad {
    animation: carouselFade2 8s infinite;
  }

  @keyframes carouselFade {
    0% { opacity: 0; }
    5% { opacity: 1; }
    25% { opacity: 1; }
    30% { opacity: 0; }
    100% { opacity: 0; }
  }

  @keyframes carouselFade2 {
    0% { opacity: 0; }
    10% { opacity: 1; }
    50% { opacity: 1; }
    60% { opacity: 0; }
    100% { opacity: 0; }
  }

  /* Alumni confirmation modal */
  .alumni-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
  }

  .alumni-modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .alumni-modal {
    background: #f4f7ff;
    border-radius: 1.5rem;
    padding: 2rem;
    max-width: 420px;
    width: 90%;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.3s;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  }

  .alumni-modal-overlay.active .alumni-modal {
    transform: scale(1);
  }

  .alumni-modal h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: #212322;
    margin-bottom: 1rem;
  }

  .alumni-modal p {
    color: #4b5563;
    margin-bottom: 1.5rem;
    line-height: 1.6;
  }

  .alumni-modal-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  .alumni-modal-cancel {
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    background: #e5e7eb;
    color: #374151;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background 0.2s;
  }

  .alumni-modal-cancel:hover {
    background: #d1d5db;
  }

  .alumni-modal-confirm {
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    background: linear-gradient(135deg, #ea7600, #f1d44b);
    color: #212322;
    font-weight: 700;
    border: none;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .alumni-modal-confirm:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(234, 118, 0, 0.4);
  }
</style>

<!-- Alumni Confirmation Modal -->
<div id="alumni-modal-overlay" class="alumni-modal-overlay">
  <div class="alumni-modal">
    <h3>Alumni Room Reservation</h3>
    <p>Rooms at The Inn at ONU are reserved for alumni and their guests only. By clicking below you are confirming you are an alumni of Phi Mu Delta or a guest.</p>
    <div class="alumni-modal-buttons">
      <button id="alumni-modal-cancel" class="alumni-modal-cancel">Cancel</button>
      <button id="alumni-modal-confirm" class="alumni-modal-confirm">I Confirm</button>
    </div>
  </div>
</div>

<script>
  const bookBtn = document.getElementById('alumni-book-btn');
  const modalOverlay = document.getElementById('alumni-modal-overlay');
  const cancelBtn = document.getElementById('alumni-modal-cancel');
  const confirmBtn = document.getElementById('alumni-modal-confirm');
  const bookingUrl = 'https://reservations.travelclick.com/113953?groupID=5047318';

  bookBtn?.addEventListener('click', () => {
    modalOverlay?.classList.add('active');
  });

  cancelBtn?.addEventListener('click', () => {
    modalOverlay?.classList.remove('active');
  });

  confirmBtn?.addEventListener('click', () => {
    window.open(bookingUrl, '_blank', 'noopener,noreferrer');
    modalOverlay?.classList.remove('active');
  });

  // Close on overlay click
  modalOverlay?.addEventListener('click', (e) => {
    if (e.target === modalOverlay) {
      modalOverlay.classList.remove('active');
    }
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modalOverlay?.classList.contains('active')) {
      modalOverlay.classList.remove('active');
    }
  });
</script>
