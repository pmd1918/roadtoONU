---
const links = [];
---

<header>
    <nav id="navbar" class="navbar">
        <div class="nav-container">
           
            <!-- Hanging Conclave Logo (appears on scroll) -->
            <img
                src="/phi%20mu%20delta%20conclave%202026.png"
                alt="Phi Mu Delta Conclave 2026"
                class="navbar-conclave-logo"
                id="navbar-conclave-logo"
            />

            <!-- Register Button (right of logo) -->
            <a class="nav-action-btn register-btn" href="#" id="register-btn">
                <span class="btn-inner">Preregister</span>
            </a>
             <!-- Donate Button (left of logo) -->
             <a class="nav-action-btn sponsor-btn" href="/sponsorship" id="sponsor-btn">
                <span class="btn-inner">Sponsor</span>
            </a>

            <!-- Navigation Links -->
            <div class="navbar-collapse" id="navbar-collapse">
                <ul class="navbar-nav" id="navbar-nav">
                    {links.map((link) => (
                        <li class="glass-item">
                            <span class="shine"></span>
                            <span class="glow"></span>
                            <a href={link.to}>{link.label}</a>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Scroll to Top Button -->
    <a href="/#home" class="scroll-top" id="scroll-top" aria-label="Scroll to top">
        <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </a>
</header>

<style>
    /* Variables */
    :root {
        --nav-height: 70px;
        --nav-bg: transparent;
        --nav-text: #9ca3af;
        --nav-text-active: #ea7600;
        --nav-font-size: 14px;

        /* Glass effect vars */
        --glass-border: 1px;
        --glass-border-color: rgba(234, 118, 0, 0.25);
        --glass-radius: 12px;
        --glass-ease: cubic-bezier(0.5, 1, 0.89, 1);

        /* Button colors */
        --color-orange: #ea7600;
        --color-gold: #f1d44b;
        --color-black: #000;
    }

    /* Animation properties */
    @property --angle {
        syntax: "<angle>";
        initial-value: 0deg;
        inherits: false;
    }

    @property --glowColor {
        syntax: "<color>";
        initial-value: #ea7600;
    }

    @keyframes rotate {
        0% { --angle: 0deg; }
        100% { --angle: 360deg; }
    }

    /* Navbar Base */
    .navbar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: var(--nav-height);
        background: var(--nav-bg);
        border: none;
        z-index: 1000;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    .nav-container {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        height: 100%;
        width: 100%;
        padding: 0 1rem;
    }

    @media (min-width: 640px) {
        .nav-container {
            padding: 0 1.5rem;
        }
    }

    @media (min-width: 1024px) {
        .nav-container {
            padding: 0 2rem;
        }
    }

    /* Hanging Conclave Logo */
    .navbar-conclave-logo {
        position: absolute;
        left: 50%;
        top: 100%;
        transform: translateX(-50%) translateY(-30%);
        height: auto;
        width: clamp(85px, 21.25vw, 187px);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
        z-index: 100;
        pointer-events: none;
    }

    .navbar-conclave-logo.show {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }

    /* Action Buttons */
    .nav-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 100px;
        border: none;
        background: none;
        position: absolute;
        top: 100%;
        transform: translateY(-30%);
        padding: 1px;
        text-decoration: none;
        transition: all 0.18s ease-in-out;
        opacity: 0;
        visibility: hidden;
        z-index: 100;
        pointer-events: none;
    }

    .nav-action-btn.show {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }

    .register-btn {
        left: calc(50% + clamp(42.5px, 10.625vw, 93.5px) + 1.5rem);
    }
    .sponsor-btn {
        right: calc(50% + clamp(42.5px, 10.625vw, 93.5px) + 1.5rem);
    }

    .nav-action-btn:after, 
    .nav-action-btn:before {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: calc(100px + 1.5px);
        background-size: 100% 100%;
        background-position: 0px 0px;
        background-image: conic-gradient(
            from var(--angle) at 50% 50%, 
            rgba(0,0,0,0) 0%,
            rgba(0,0,0,0) 33%,
            var(--glowColor) 50%,
            rgba(0,0,0,0) 66%,
            rgba(0,0,0,0) 100%
        );
        animation: rotate 2s infinite linear;
    }
 
    .nav-action-btn:before {
        filter: blur(20px);
    }

    .register-btn {
        --glowColor: var(--color-orange);
    }

    .sponsor-btn {
        --glowColor: var(--color-gold);
    }

    .btn-inner {
        position: relative;
        display: flex;
        flex-direction: column;
        width: 100%;
        padding: 0.6rem 2rem;
        border-radius: 100px;
        font-family: 'Inter', sans-serif;
        font-weight: 800;
        font-size: 0.9375rem;
        text-transform: uppercase;
        letter-spacing: 2px;
        z-index: 1;
        transition: all 0.18s ease;
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(40px);
        backface-visibility: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.1);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .register-btn .btn-inner {
        color: #212322;
    }

    .sponsor-btn .btn-inner {
        color: #212322;
    }

    .nav-action-btn:hover .btn-inner {
        background: rgba(0, 0, 0, 0.5);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 8px 24px rgba(0, 0, 0, 0.15);
        transform: translateY(-1px);
    }

    .register-btn:hover .btn-inner {
        color: #ff8c1a;
    }

    .sponsor-btn:hover .btn-inner {
        color: #f5de6f;
    }

    .nav-action-btn:active {
        transform: translateY(-30%) scale(0.95);
    }

    /* Mobile button positioning */
    @media (max-width: 768px) {
        .sponsor-btn {
            right: calc(50% + clamp(42.5px, 10.625vw, 93.5px) + 1rem);
        }

        .register-btn {
            left: calc(50% + clamp(42.5px, 10.625vw, 93.5px) + 1rem);
        }

        .btn-inner {
            padding: 0.5rem 1.25rem;
            font-size: 0.8125rem;
            letter-spacing: 0.5px;
        }
    }

    /* Navbar Collapse */
    .navbar-collapse {
        display: none;
        position: absolute;
        top: var(--nav-height);
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(12px);
        padding: 1rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .navbar-collapse.show {
        display: block;
    }

    @media (min-width: 768px) {
        .navbar-collapse {
            display: flex;
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            align-items: center;
            gap: 0.5rem;
            background: transparent;
            backdrop-filter: none;
            padding: 0;
            box-shadow: none;
        }
    }

    /* Navigation Links */
    .navbar-nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        list-style: none;
        margin: 0;
        padding: 0;
        width: 100%;
    }

    @media (min-width: 768px) {
        .navbar-nav {
            flex-direction: row;
            align-items: center;
            width: auto;
        }
    }

    /* Scroll to Top Button */
    .scroll-top {
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 44px;
        height: 44px;
        color: white;
        background: var(--nav-text-active);
        border-radius: 50%;
        box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2);
        transform: translateY(80px);
        transition: transform 0.2s ease-in, opacity 0.2s ease;
        opacity: 0.7;
        z-index: 999;
    }

    .scroll-top:hover {
        opacity: 1;
    }

    .scroll-top.show-button {
        transform: translateY(0);
    }

    .scroll-top svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }

    /* Focus section animation */
    :global(section.focus .section-header) {
        color: var(--nav-text-active);
    }
</style>

<script>
    // Elements
    const navbar = document.getElementById('navbar') as HTMLElement;
    const navbarNav = document.getElementById('navbar-nav') as HTMLElement;
    const scrollTopBtn = document.getElementById('scroll-top') as HTMLElement;
    const navLinks = navbarNav.querySelectorAll('a');
    const heroConclaveLogo = document.getElementById('hero-conclave-logo') as HTMLElement;
    const navbarConclaveLogo = document.getElementById('navbar-conclave-logo') as HTMLElement;
    const registerBtn = document.getElementById('register-btn') as HTMLElement;
    const sponsorBtn = document.getElementById('sponsor-btn') as HTMLElement;

    // Smooth scroll and active state
    navLinks.forEach((link) => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href');

            if (href && href.startsWith('/#')) {
                e.preventDefault();
                const targetId = href.substring(2);
                const targetElement = document.getElementById(targetId);

                // Remove active from all, add to current
                navbarNav.querySelectorAll('.glass-item').forEach(item => item.classList.remove('active'));
                link.closest('.glass-item')?.classList.add('active');

                // Add focus effect to target section
                document.querySelectorAll('section').forEach(s => s.classList.remove('focus'));
                targetElement?.classList.add('focus');

                // Remove focus class after animation
                setTimeout(() => {
                    targetElement?.classList.remove('focus');
                }, 2000);

                if (targetElement) {
                    const navHeight = navbar.offsetHeight;
                    const targetPosition = targetElement.offsetTop - navHeight;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });

    // Home link smooth scroll
    const homeLinks = document.querySelectorAll('a[href="/#home"]');
    homeLinks.forEach((link) => {
        link.addEventListener('click', (e) => {
            e.preventDefault();

            // Remove all active states
            navbarNav.querySelectorAll('.glass-item').forEach(item => item.classList.remove('active'));

            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    });

    // Scroll event handler
    function handleScroll() {
        const scrollPos = window.scrollY;

        // Show/hide scroll-top button
        if (scrollPos > 50) {
            scrollTopBtn.classList.add('show-button');
        } else {
            scrollTopBtn.classList.remove('show-button');
        }

        // Update active nav item based on scroll position
        const sections = document.querySelectorAll('section[id]');
        const navHeight = navbar.offsetHeight;

        sections.forEach((section) => {
            const sectionTop = (section as HTMLElement).offsetTop - navHeight - 100;
            const sectionBottom = sectionTop + (section as HTMLElement).offsetHeight;
            const sectionId = section.getAttribute('id');

            if (scrollPos >= sectionTop && scrollPos < sectionBottom) {
                navbarNav.querySelectorAll('.glass-item').forEach(item => item.classList.remove('active'));
                const activeLink = navbarNav.querySelector(`a[href="/#${sectionId}"]`);
                activeLink?.closest('.glass-item')?.classList.add('active');
            }
        });

        // Show/hide hanging logo and buttons
        if (heroConclaveLogo && navbarConclaveLogo && registerBtn && sponsorBtn) {
            const heroLogoRect = heroConclaveLogo.getBoundingClientRect();
            const navHeight = navbar.offsetHeight;

            if (heroLogoRect.top < navHeight) {
                navbarConclaveLogo.classList.add('show');
                registerBtn.classList.add('show');
                sponsorBtn.classList.add('show');
                heroConclaveLogo.classList.add('faded');
            } else {
                navbarConclaveLogo.classList.remove('show');
                registerBtn.classList.remove('show');
                sponsorBtn.classList.remove('show');
                heroConclaveLogo.classList.remove('faded');
            }
        }
    }

    // Initial check and scroll listener
    handleScroll();
    window.addEventListener('scroll', handleScroll);

    // Preregister button opens modal
    if (registerBtn) {
        registerBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.dispatchEvent(new CustomEvent('open-preregister-modal'));
        });
    }
</script>