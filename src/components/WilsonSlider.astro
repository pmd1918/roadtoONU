---
const images = [
  { src: '/images/wilson-factory/Exterior-of-Ada-football-factory-2024-1-1024x717.webp', alt: 'Wilson Football Factory Exterior' },
  { src: '/images/wilson-factory/Inside-of-the-Wilson-Ada-factory-2024-1920x1080.webp', alt: 'Inside the Wilson Factory' },
  { src: '/images/wilson-factory/Craftswoman-at-Ada-factory-1920x1080.webp', alt: 'Craftswoman at Work' },
  { src: '/images/wilson-factory/Craftsmen-at-Ada-factory-1-1920x1080.webp', alt: 'Craftsmen at Work' },
  { src: '/images/wilson-factory/Wilson-ball-in-the-making-1920x1080.webp', alt: 'Football in the Making' },
  { src: '/images/wilson-factory/Ada-factory-lobby-1920x1080.webp', alt: 'Factory Lobby' },
  { src: '/images/wilson-factory/Retail-pop-up-in-Ada-factory-1920x1080.webp', alt: 'Retail Pop-up Shop' },
];
---

<section class="wilson-slider-section" style="margin-top: -2rem;">
  <div class="slider-wrapper">
    <div class="slider-overlay"></div>
    <div class="slider-content">
      <h2 class="slider-heading">The Star Of Your Favorite Football Moment</h2>
      <p class="slider-subheading">Made In Ada, Ohio</p>
      <a href="https://www.wilson.com/en-us/explore/football/ada-ohio-factory" class="read-more-btn" id="wilson-read-more">More</a>
    </div>
    <div class="slider-track" id="wilson-slider-track">
      {/* Original slides */}
      {images.map((image, index) => (
        <div class="slide" data-index={index}>
          <img src={image.src} alt={image.alt} loading="lazy" />
        </div>
      ))}
      {/* Duplicate first slide for seamless loop */}
      <div class="slide" data-index="0">
        <img src={images[0].src} alt={images[0].alt} loading="lazy" />
      </div>
    </div>
    <a href="https://www.amersports.com/newsroom/crafting-a-legacy-in-wilsons-new-football-factory-in-ada-ohio/" class="photo-credit" target="_blank" rel="noopener">Photos: Amer Sports</a>
  </div>
</section>

<style>
  .wilson-slider-section {
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    overflow: hidden;
  }
  
  .slider-wrapper {
    width: 100%;
    overflow: hidden;
    position: relative;
  }
  
  .slider-overlay {
    position: absolute;
    inset: 0;
    background: rgba(33, 35, 34, 0.35);
    z-index: 2;
    pointer-events: none;
  }
  
  .slider-content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 3;
    text-align: center;
    padding: 1rem;
    gap: 0.25rem;
  }
  
  .slider-heading {
    font-family: 'Have Heart', cursive;
    font-size: clamp(1.4rem, 4vw, 3.5rem);
    color: #f4f7ff;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)) drop-shadow(0 2px 20px rgba(255, 255, 255, 0.5));
    margin-bottom: 0.25rem;
    line-height: 1.2;
    letter-spacing: 0.02em;
    white-space: nowrap;
  }
  
  .slider-subheading {
    font-family: 'Inter', sans-serif;
    font-size: clamp(0.9rem, 2vw, 1.25rem);
    font-weight: 600;
    color: #ffffff;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }
  
  .read-more-btn {
    display: inline-block;
    margin-top: 0.75rem;
    padding: 0.6rem 1.5rem;
    font-family: 'Inter', sans-serif;
    font-size: clamp(0.75rem, 1.5vw, 0.9rem);
    font-weight: 600;
    color: #212322;
    background: linear-gradient(135deg, #ea7600, #f1d44b);
    border-radius: 50px;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    box-shadow: 0 4px 15px rgba(234, 118, 0, 0.4);
    transition: all 0.3s ease;
  }
  
  .read-more-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(234, 118, 0, 0.5);
  }
  
  .slider-track {
    display: flex;
    transition: transform 0.8s ease-in-out;
  }
  
  .slider-track.no-transition {
    transition: none;
  }
  
  .slide {
    min-width: 100%;
    aspect-ratio: 21/9;
  }
  
  @media (max-width: 768px) {
    .slide {
      aspect-ratio: 16/9;
    }
  }
  
  .slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: blur(8px);
    transform: scale(1.05);
  }

  .photo-credit {
    position: absolute;
    bottom: 0.75rem;
    right: 1rem;
    font-family: 'Inter', sans-serif;
    font-size: 0.625rem;
    color: rgba(255, 255, 255, 0.5);
    text-decoration: none;
    z-index: 10;
    transition: color 0.2s;
  }

  .photo-credit:hover {
    color: rgba(255, 255, 255, 0.8);
  }
</style>

<script>
  const track = document.getElementById('wilson-slider-track');
  const totalSlides = 7;
  let currentIndex = 0;
  
  function nextSlide() {
    currentIndex++;
    if (track) {
      track.style.transform = `translateX(-${currentIndex * 100}%)`;
      
      // When we reach the duplicate slide, reset to the real first slide
      if (currentIndex === totalSlides) {
        setTimeout(() => {
          track.classList.add('no-transition');
          currentIndex = 0;
          track.style.transform = `translateX(0)`;
          // Force reflow
          track.offsetHeight;
          track.classList.remove('no-transition');
        }, 800); // Wait for transition to complete
      }
    }
  }
  
  // Auto-rotate every 4 seconds
  setInterval(nextSlide, 4000);
  
  // Handle Read More button - popup on mobile, new tab on desktop
  const readMoreBtn = document.getElementById('wilson-read-more');
  if (readMoreBtn) {
    readMoreBtn.addEventListener('click', (e) => {
      const isMobile = window.innerWidth < 768;
      const url = readMoreBtn.getAttribute('href');
      
      if (isMobile && url) {
        e.preventDefault();
        // Open as popup on mobile
        window.open(url, 'WilsonArticle', 'width=400,height=600,scrollbars=yes,resizable=yes');
      } else {
        // Open in new tab on desktop
        readMoreBtn.setAttribute('target', '_blank');
        readMoreBtn.setAttribute('rel', 'noopener noreferrer');
      }
    });
  }
</script>
