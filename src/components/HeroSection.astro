---
import Container from "./Container.astro"
import Countdown from "./Countdown.astro"

const dividerItems = Array.from({ length: 12 });
---

<div class="hero-section relative" id="home">
    <h1 class="sr-only">Phi Mu Delta 62nd National Conclave â€” All Roads Lead to Ada</h1>
    <!-- Hero Top Section with Background -->
    <div class="hero-top relative">
        <!-- Background Image -->
        <div class="hero-bg" aria-hidden="true">
            <img
                src="/hero-bg-1280.webp"
                srcset="/hero-bg-768.webp 768w,
                        /hero-bg-1280.webp 1280w,
                        /hero-bg.webp 2732w"
                sizes="100vw"
                alt=""
                width="2732"
                height="1536"
                fetchpriority="high"
                loading="eager"
                decoding="async"
            />
        </div>
        <!-- Gradient Overlay -->
        <div aria-hidden="true" class="absolute inset-0 grid grid-cols-2 -space-x-52 opacity-40">
            <div class="blur-[106px] h-56 bg-gradient-to-br from-primary to-orange-400"></div>
            <div class="blur-[106px] h-32 bg-gradient-to-r from-orange-300 to-yellow-300"></div>
        </div>       
        <Container>
            
            <div class="relative pt-24 sm:pt-32 lg:pt-36 pb-8 sm:pb-12 ml-auto">
                <div class="lg:w-2/3 text-center mx-auto">
                    <div class="flex flex-col items-center mb-6 sm:mb-8">
                        <div class="flex items-center justify-center gap-2 sm:gap-3 md:gap-4 w-full">
                            <div class="text-right flex-1">
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-bold text-[#ea7600] uppercase leading-tight">June 25 - 28, 2026</p>
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-medium text-[#212322] uppercase leading-tight" style="text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);">62<sup class="text-[0.6em]">nd</sup> National</p>
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-medium text-[#212322] uppercase leading-tight" style="text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);">Conclave</p>
                            </div>
                            <img 
                                id="hero-conclave-logo" 
                                src="/phi-mu-delta-conclave-2026-128.optimized.webp" 
                                srcset="/phi-mu-delta-conclave-2026-128.optimized.webp 128w,
                                        /phi-mu-delta-conclave-2026-192.optimized.webp 192w,
                                        /phi-mu-delta-conclave-2026-256.optimized.webp 256w,
                                        /phi-mu-delta-conclave-2026-384.optimized.webp 384w,
                                        /phi-mu-delta-conclave-2026-512.optimized.webp 512w"
                                sizes="(max-width: 480px) 128px,
                                       (max-width: 768px) 192px,
                                       (max-width: 1024px) 256px,
                                       384px"
                                alt="Phi Mu Delta Conclave 2026" 
                                class="w-32 sm:w-48 md:w-64 lg:w-80 xl:w-96 flex-shrink-0" 
                                width="128" 
                                height="131" 
                                decoding="async"
                            />
                            <div class="text-left flex-1">
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-bold text-[#ea7600] uppercase leading-tight">Ada, Ohio</p>
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-medium text-[#212322] uppercase leading-tight" style="text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);">Ohio Northern</p>
                                <p class="text-sm sm:text-base md:text-lg lg:text-xl font-medium text-[#212322] uppercase leading-tight" style="text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);">University</p>
                            </div>
                        </div>
                    </div>
                    <br />
                    <Countdown/>
                <div class="mt-8 sm:mt-12 md:mt-16 flex flex-wrap justify-center gap-y-3 gap-x-4 sm:gap-y-4 sm:gap-x-6">
                </div>
            </div>
        </Container>
    </div>
    <!-- Unified gradient wrapper for marquees + sponsor section -->
    <div class="sponsor-unified-gradient">
      <!-- Top Divider Track -->
      <div class="hero-divider">
        <div class="hero-divider-track">
          <div class="hero-divider-content">
            {dividerItems.map(() => (
              <>
                <img
                  src="/ScalesOf Justice.svg"
                  alt=""
                  aria-hidden="true"
                  loading="lazy"
                  decoding="async"
                  fetchpriority="low"
                />
                <img
                  src="/images/wordmarks/all-roads-lead-to-ada.svg"
                  alt=""
                  aria-hidden="true"
                  class="hero-divider-wordmark"
                  loading="lazy"
                  decoding="async"
                  fetchpriority="low"
                />
              </>
            ))}
          </div>
        </div>
      </div>
      <!-- Sponsor Content -->
      <div class="sponsor-content-section">
          <Container>
              <div class="flex flex-nowrap justify-center items-center gap-2 sm:gap-3 lg:gap-6 xl:gap-10 py-4">
                  <!-- Left Logo -->
                  <div class="p-1 sm:p-2 grayscale transition duration-200 hover:grayscale-0 focus-within:grayscale-0 active:grayscale-0 flex-shrink-0" tabindex="0">
                      <div class="flex items-center gap-2 2xl:gap-4">
                          <div class="hidden sm:block text-right">
                              <p class="text-xs sm:text-sm font-bold text-[#212322] leading-tight whitespace-nowrap">The Mu Beta</p>
                              <p class="text-xs sm:text-sm font-normal text-[#212322] leading-tight whitespace-nowrap">Alumni Association</p>
                          </div>
                          <img
                              src="./images/sponsors/mu-beta-aa-shield.webp"
                              class="h-10 sm:h-12 md:h-14 lg:h-16 xl:h-20 2xl:h-24 w-auto"
                              width="98"
                              height="119"
                              loading="lazy"
                              alt="Mu Beta Alumni Association logo"
                          />
                      </div>
                  </div>
                  <!-- Center Text -->
                  <div class="text-center px-2 flex-shrink min-w-0">
                      <p class="font-bold uppercase leading-tight text-white whitespace-nowrap" style="font-size: clamp(0.7rem, 2.5vw, 2.25rem);">Featured Sponsors</p>
                      <a href="/sponsorship" class="commit-sponsor-btn mt-2">
                          <span class="commit-btn-inner whitespace-nowrap">Commit to Sponsor</span>
                      </a>
                  </div>
                  <!-- Right Logo -->
                  <div class="p-1 sm:p-2 grayscale transition duration-200 hover:grayscale-0 focus-within:grayscale-0 active:grayscale-0 flex-shrink-0" tabindex="0">
                      <div class="flex items-center gap-2 2xl:gap-4">
                          <img
                              src="./images/sponsors/nu-beta-aa-logo-gold.webp"
                              class="h-10 sm:h-12 md:h-14 lg:h-16 xl:h-20 2xl:h-24 w-auto"
                              width="800"
                              height="800"
                              loading="lazy"
                              alt="Nu Beta Alumni Association logo"
                          />
                          <div class="hidden sm:block text-left min-w-0">
                              <p class="text-[10px] xs:text-xs sm:text-sm font-semibold text-[#212322] leading-tight">The Nu Beta</p>
                              <p class="text-[10px] xs:text-xs sm:text-sm font-normal text-[#212322] leading-tight">Alumni Association</p>
                          </div>
                      </div>
                  </div>
              </div>
          </Container>
      </div>
      <!-- Bottom Divider Track -->
      <div class="hero-divider hero-divider-bottom">
        <div class="hero-divider-track">
          <div class="hero-divider-content">
            {dividerItems.map(() => (
              <>
                <img
                  src="/ScalesOf Justice.svg"
                  alt=""
                  aria-hidden="true"
                  loading="lazy"
                  decoding="async"
                  fetchpriority="low"
                />
                <img
                  src="/images/wordmarks/all-roads-lead-to-ada.svg"
                  alt=""
                  aria-hidden="true"
                  class="hero-divider-wordmark"
                  loading="lazy"
                  decoding="async"
                  fetchpriority="low"
                />
              </>
            ))}
          </div>
        </div>
      </div>
    </div>
</div>

<style>
    .hero-section {
        overflow: hidden;
    }

    .hero-top {
        overflow: hidden;
    }

    .hero-bg {
        position: absolute;
        inset: 0;
        background-color: #ea7600;
        opacity: 1;
        z-index: 0;
    }

    .hero-bg picture,
    .hero-bg img {
        display: block;
        width: 100%;
        height: 100%;
    }

    .hero-bg img {
        object-fit: cover;
        object-position: center;
    }

    #hero-conclave-logo {
        transition: opacity 0.3s ease;
    }

    #hero-conclave-logo.faded {
        opacity: 0;
    }

    /* Scrolling Track Styles */
    .hero-divider {
        position: relative;
        width: 100%;
        height: clamp(1.75rem, 3vw, 2.5rem);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        z-index: 10;
        background: transparent;
    }

    /* Static repeated track */
    .hero-divider-track {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
        width: max-content;
        min-width: 100%;
        height: 100%;
        margin: 0 auto;
        opacity: 0.85;
        filter: brightness(0);
    }

    .hero-divider-content {
        flex: 0 0 auto;
        display: flex;
        align-items: center;
        gap: clamp(0.5rem, 1.5vw, 1rem);
        white-space: nowrap;
        padding-right: clamp(0.5rem, 1.5vw, 1rem);
    }

    .hero-divider-content img:not(.hero-divider-wordmark) {
        width: clamp(12px, 2vw, 20px);
        height: clamp(12px, 2vw, 20px);
        display: block;
        flex: 0 0 auto;
    }

    .hero-divider-content img.hero-divider-wordmark {
        width: clamp(7.5rem, 20vw, 12.5rem);
        max-width: 100%;
        height: auto;
        color: #212322;
        flex: 0 0 auto;
        display: block;
    }

    /* Commit to Sponsor Button */
    @property --commit-angle {
        syntax: "<angle>";
        initial-value: 0deg;
        inherits: false;
    }

    @keyframes commit-rotate {
        0% { --commit-angle: 0deg; }
        100% { --commit-angle: 360deg; }
    }

    .commit-sponsor-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 100px;
        border: none;
        background: none;
        position: relative;
        padding: 1px;
        text-decoration: none;
        transform: translateZ(0); /* Force GPU layer */
        backface-visibility: hidden;
    }

    .commit-btn-inner {
        position: relative;
        display: flex;
        flex-direction: column;
        width: 100%;
        padding: 0.4rem 0.875rem;
        border-radius: 100px;
        font-family: 'Inter', sans-serif;
        font-weight: 800;
        font-size: 0.6875rem;
        text-transform: uppercase;
        letter-spacing: 0.75px;
        line-height: 1.2;
        z-index: 1;
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.1);
        color: #ffffff;
    }

    .commit-sponsor-btn:hover {
        transform: translateZ(0) translateY(-1px);
    }

    .commit-sponsor-btn:hover .commit-btn-inner {
        background: rgba(0, 0, 0, 0.9);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    .commit-sponsor-btn:active {
        transform: scale(0.98);
    }

    @media (min-width: 480px) {
        .commit-btn-inner {
            padding: 0.5rem 1.25rem;
            font-size: 0.8125rem;
            letter-spacing: 1px;
        }
    }

    @media (min-width: 768px) {
        .commit-btn-inner {
            padding: 0.6rem 2rem;
            font-size: 0.9375rem;
            letter-spacing: 2px;
        }
    }

    /* Unified gradient wrapper - single gradient from top to bottom */
    .sponsor-unified-gradient {
        background: linear-gradient(
            180deg,
            #ea7600 0%,
            #f1d44b 100%
        ) !important;
        position: relative;
        z-index: 10;
    }

    /* Make dividers transparent so gradient shows through */
    .sponsor-unified-gradient .hero-divider {
        background: transparent;
    }

    .sponsor-unified-gradient .hero-divider::before {
        display: none;
    }

    /* Sponsor content - transparent background */
    .sponsor-content-section {
        background: transparent;
        position: relative;
    }

    @media (max-width: 480px) {
        .sponsor-content-section .flex.items-center {
            gap: 0.25rem;
        }
        
        .sponsor-content-section img {
            height: 2.5rem !important;
        }
    }
</style>
