---
const testimonials = [
  {
    image: "/images/avatars/alex-fries.jpg",
    name: "Alex Fries",
    title: "National Council member, former chapter president Nu Beta",
    quote: "Joining Phi Mu Delta is about more than joining a chapter. It is about joining a brotherhood of future friends, colleagues and partners in your pursuit of the common good, no matter the arena you choose to enter. Conclave is where that ideal becomes real.",
    color: "#ea7600"
  },
  {
    image: "/images/avatars/1714137500084.jpeg",
    name: "Michael Doran",
    title: "National Council member, former chapter president Mu Alpha",
    quote: "We spend most of our lives inside our bubbles, in our own built communities. Conclaves are the chance to pop those bubbles and share ideas, successes, failures and support across the national fraternity in distance and generation.",
    color: "#f1d44b"
  },
  {
    image: "/images/avatars/1693961796462_orig.jpeg",
    name: "Thomas Stephen",
    title: "National Treasurer, former chapter president Nu Beta",
    quote: "Conclave is the expression of our Phi Mu Delta values! Spending time with brothers, old and new, it reminds me of all the good we can create in the world.",
    color: "#ea7600"
  }
];
---

<section class="testimonials-section" id="reviews">
  <div class="testimonials-container">
    <div class="testimonials-header">
      <h2 class="testimonials-title">Why Attend Conclave</h2>
      <p class="testimonials-subtitle">Hear from brothers who've experienced the power of gathering together</p>
    </div>

    <div class="slider-track">
      {testimonials.map((t, i) => (
        <div class={`testimonial-slide ${i === 0 ? 'active' : ''}`} data-index={i}>
          <div class="testimonial-layout">
            <div class="testimonial-photo-side">
              <div class="photo-circle" style={`background: ${t.color};`}>
                <img src={t.image} alt={t.name} class="testimonial-photo" loading="lazy" />
              </div>
            </div>
            <div class="testimonial-content-side">
              <div class="quote-mark">"</div>
              <blockquote class="testimonial-quote">{t.quote}</blockquote>
              <div class="testimonial-author">
                <span class="author-name">{t.name}</span>
                <span class="author-title">{t.title}</span>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <div class="slider-nav">
      <button class="nav-arrow nav-prev" aria-label="Previous">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <button class="nav-arrow nav-next" aria-label="Next">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>
</section>

<style>
  .testimonials-section {
    background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 5rem 1.5rem;
  }

  .testimonials-container {
    max-width: 1000px;
    margin: 0 auto;
  }

  .testimonials-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .testimonials-title {
    font-family: 'Have Heart One', cursive;
    font-size: clamp(2.5rem, 6vw, 4rem);
    color: #212322;
    margin-bottom: 0.5rem;
  }

  .testimonials-subtitle {
    font-family: 'Inter', sans-serif;
    font-size: clamp(0.9rem, 2vw, 1.1rem);
    font-weight: 300;
    color: #6b7280;
  }

  .slider-track {
    position: relative;
    min-height: 400px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
    overflow: hidden;
  }

  .testimonial-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transform: translateX(30px);
    transition: all 0.5s ease;
    pointer-events: none;
  }

  .testimonial-slide.active {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
  }

  .testimonial-layout {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    height: 100%;
    min-height: 400px;
  }

  .testimonial-photo-side {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 100%);
  }

  .photo-circle {
    width: 220px;
    height: 220px;
    border-radius: 50%;
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .testimonial-photo {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid white;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .testimonial-content-side {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 3rem;
    position: relative;
  }

  .quote-mark {
    font-family: Georgia, serif;
    font-size: 6rem;
    line-height: 1;
    color: #ea7600;
    opacity: 0.3;
    position: absolute;
    top: 1rem;
    left: 2rem;
  }

  .testimonial-quote {
    font-family: 'Inter', sans-serif;
    font-size: clamp(0.95rem, 1.5vw, 1.1rem);
    font-weight: 400;
    line-height: 1.8;
    color: #374151;
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
  }

  .testimonial-author {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .author-name {
    font-family: 'Inter', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: #212322;
  }

  .author-title {
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    font-weight: 400;
    color: #6b7280;
  }

  .slider-nav {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 2rem;
  }

  .nav-arrow {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: white;
    border: 2px solid #e5e7eb;
    color: #374151;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }

  .nav-arrow:hover {
    background: #ea7600;
    border-color: #ea7600;
    color: white;
    transform: scale(1.1);
  }

  @media (max-width: 768px) {
    .testimonial-layout {
      grid-template-columns: 1fr;
      grid-template-rows: auto 1fr;
    }

    .testimonial-photo-side {
      padding: 2rem 1rem 1rem;
    }

    .photo-circle {
      width: 150px;
      height: 150px;
      padding: 8px;
    }

    .testimonial-content-side {
      padding: 1.5rem 2rem 2rem;
      text-align: center;
    }

    .quote-mark {
      font-size: 4rem;
      top: 0.5rem;
      left: 50%;
      transform: translateX(-50%);
    }

    .testimonial-author {
      align-items: center;
    }

    .slider-track {
      min-height: 500px;
    }
  }
</style>

<script>
  const slides = document.querySelectorAll('.testimonial-slide');
  const prevBtn = document.querySelector('.nav-prev');
  const nextBtn = document.querySelector('.nav-next');
  let current = 0;
  const total = slides.length;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === index);
    });
    current = index;
  }

  function nextSlide() {
    showSlide((current + 1) % total);
  }

  function prevSlide() {
    showSlide((current - 1 + total) % total);
  }

  prevBtn?.addEventListener('click', prevSlide);
  nextBtn?.addEventListener('click', nextSlide);

  // Auto-advance every 8 seconds
  setInterval(nextSlide, 8000);

  // Touch/swipe support
  let touchStartX = 0;
  const track = document.querySelector('.slider-track');
  
  track?.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });

  track?.addEventListener('touchend', (e) => {
    const touchEndX = e.changedTouches[0].screenX;
    if (touchStartX - touchEndX > 50) nextSlide();
    if (touchEndX - touchStartX > 50) prevSlide();
  }, { passive: true });
</script>
